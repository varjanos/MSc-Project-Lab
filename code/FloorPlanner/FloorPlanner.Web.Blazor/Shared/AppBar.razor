@using Microsoft.AspNetCore.Components.Authorization;
@using System.Security.Claims;

@inject AuthenticationStateProvider AuthStateProvider

<div/>

<MudSpacer />
<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>
    <Authorized>
        <MudText Typo="Typo.subtitle1">Name: @_username</MudText>
    </Authorized>
    <NotAuthorized>
        <MudText Typo="Typo.subtitle1">Please login to use the page!</MudText>
    </NotAuthorized>
</Microsoft.AspNetCore.Components.Authorization.AuthorizeView>

@code 
{
    private string _username = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        var user = (await AuthStateProvider.GetAuthenticationStateAsync()).User.Identity as ClaimsIdentity;

        if(user != null)
        {
            _username = user!.Name!;
        }
    }
}